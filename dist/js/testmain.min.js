let latestProduct,bestSeller,productTab,featuredTab,newestTab,searchProduct;function init(){let t=[],a=[];function e(){let t=$(".searchVal").val(),a=function(t){$(".search-form").empty(),console.log(t);return searchProduct.filter((a,e)=>{if(a.name.toLowerCase().includes(t.toLowerCase()))return a.name})}(t);!function(t,a){renderSearch(a.map(a=>{let e=a.name,n=new RegExp(t,"gi");return[...new Set(a.name.match(n))].map(t=>{""!=t&&(n=new RegExp(t+"(?![^<]*>)","g"),e=e.replace(n,`<span style="color:#06bec7">${t}</span>`))}),{...a,name:e}}))}(t,a),t?($(".search-form").css("border","1px solid #ddd"),$("div.height-container").addClass("triangle")):($(".search-form").empty(),$("div.height-container").removeClass("triangle"),$(".search-form").css("border","none"))}console.log($("#latest-id").hasClass("latest-product")),$("#latest-id").hasClass("latest-product")&&(console.log(latestProduct),renderProduct("latest",latestProduct)),$("#seller-id").hasClass("best-seller")&&renderProduct("best_seller",bestSeller),$("#tab-id").hasClass("tabs")&&renderProduct("p-tabs",productTab),$("body").on("click",".pro-tab",(function(){$(".pt-row").empty(),renderProduct("p-tabs",productTab),$(".pro-tab").toggleClass("tab-active"),$("h1.pro-tab").siblings().removeClass("tab-active")})),$("body").on("click",".featured-tab",(function(){$(".pt-row").empty(),renderProduct("f-tabs",featuredTab),$(".featured-tab").toggleClass("tab-active"),$("h1.featured-tab").siblings().removeClass("tab-active")})),$("body").on("click",".newest-tab",(function(){$(".pt-row").empty(),renderProduct("n-tabs",newestTab),$(".newest-tab").toggleClass("tab-active"),$("h1.newest-tab").siblings().removeClass("tab-active")})),$("#owl-carousel1").owlCarousel({items:1,nav:!0,dots:!1}),$("#owl-carousel3").owlCarousel({items:4,nav:!0,dots:!1,autoplay:!0,autoplayTimeout:3e3}),$("#owl-carousel2").owlCarousel({items:4,nav:!0,dots:!1}),$("#owl-carousel4").owlCarousel({items:3}),$("#review-owl").owlCarousel({items:1,dots:!0}),$(window).scroll((function(){$("html").scrollTop()>500?$(".totop").fadeIn(800):$(".totop").fadeOut()})),$(window).scroll((function(){$("html").scrollTop()>500?($(".nav-bar-adj").fadeIn(50),$(".nav-bar-adj").css("position","fixed"),$(".nav-bar-adj").css("box-shadow"," rgba(136, 136, 136, 0.65) 0px 0px 15px 0px")):($(".nav-bar-adj").css("position","relative"),$(".nav-bar-adj").css("box-shadow","none"))})),$(".searchVal").keyup((function(t){t.preventDefault(),e()}));let n=searchProduct;$("body").on("click",".pro-status",(function(){const e=$(this).parents(".pro-item").data("id"),s=n.find(t=>t.id===e),o=a.findIndex(t=>t.id===e);-1===o?(s.quantity=1,s.promotion?s.total=s.quantity*s.promotion:s.total=s.quantity*s.original,a.push(s),t.push(s)):(a[o].quantity+=1,s.promotion?(a[o].total=a[o].quantity*a[o].promotion,a[o].total=a[o].total.toFixed(2)):(a[o].total=a[o].quantity*a[o].original,a[o].total=a[o].total.toFixed(2))),renderCart(a),localStorage.setItem("cart",JSON.stringify(t))})),$("body").on("click",".discard",(function(){const t=$(this).data("id");console.log(t),a.filter((e,n)=>{e.id===t&&a.splice(n,1)}),renderCart(a)}))}function checkTriangle(){$("div").hasClass("search-form")?$("div.height-container").addClass("triangle"):$("div.height-container").removeClass("triangle")}function renderCart(t){const a=t.reduce((t,a)=>t+a.quantity,0);if(a?$(".item-quantity").text(a):$(".item-quantity").text(t.length),t.length){$(".cart-list").empty(),t.map(t=>{$(`\n        <div class="item-container">\n          <div class="check-out-img"><img src="${t.img}" alt=""></div>\n          <div class="item-description">\n            <div> <a href="">${t.name}</a></div>\n            <div>QTY: ${t.quantity}</div>\n            <div class="item-price">R$${t.total}</div>\n          </div>\n          <span class="discard" data-id=${t.id}>x</span>\n        </div>\n      `).appendTo(".cart-list")}),console.log(t);const a=t.reduce((t,a)=>t+a.total,0);$(".check-out").empty(),$(`\n      <div class="check-out">\n          <p class="check-out-total">Total R$ ${a}</p>\n          <div class="button-holder">\n            <button><a href="checkout.html">VIEW CART</a></button>\n            <button><a href="">PROCEED TO CHECKOUT</a></button>\n          </div>\n        </div>\n      `).appendTo(".cart-list")}else $(".cart-list").empty(),$("\n        <p>Your cart is currently empty</p>\n    ").appendTo(".cart-list")}function renderSearch(t){t.map(t=>{let a="",e=`<span class="original">R${t.currency}${t.original}</span>`;t.promotion&&(e=`<span class="original" style="text-decoration:line-through; font-weight:normal">R${t.currency}${t.original}</span>`,a=`<span class="promotion" style="color:#06bec7">R${t.currency}${t.promotion}</span>`),$(`\n    \n    <div class="search-content">\n      <div id="search_${t.id}" class="search-item flex"  data-id=${t.id}>\n        <a href="" class="hover-link-latest"><img src="${t.img}" alt=""></a>\n        <div class="search-detail">\n          <span class="pro-name">${t.name}</span><br>\n          <div class="search-margin-adj"></div>\n          ${e}\n          ${a}\n        </div>\n      </div>\n    </div>\n    \n    `).appendTo(".search-form")})}function renderProduct(t,a){let e="",n="";switch($(e).empty(),t){case"latest":e=".latest-row",n="latest-item";break;case"best_seller":e=".bs-latest-row",n="bs-latest-item";break;case"p-tabs":case"f-tabs":case"n-tabs":e=".pt-row",n="pt-item"}a.map((a,s)=>{let o="",r=`<span class="original">R${a.currency}${a.original}</span>`;a.promotion&&(r=`<span class="original" s>R${a.currency}${a.original}</span>`,o=`<span class="promotion" style="color:#06bec7">R${a.currency}${a.promotion}</span>`),console.log(a),$(`\n      \n      <div class="col-sm-3">\n        <div id="${t}_${a.id}" class="${n} pro-item"  data-id=${a.id}>\n          <a href="" class="hover-link-latest"><img src="${a.img}" alt=""></a>\n          <ul class="tag-container"></ul>\n          <div class="interest-icon">\n            <span><i class="fas fa-exchange-alt"></i></span>\n            <span><i class="fas fa-heart"></i></span>\n            <span><i class="fas fa-search"></i></span>\n          </div>\n          <span class="pro-name">${a.name}</span><br>\n          ${r}\n          ${o}\n          <span class="pro-status">${a.status}</span>\n        </div>\n      </div>\n      \n      `).appendTo(e),renderTag2(`${t}_${a.id}`,a.tag)})}function renderTag2(t,a){if(null!=a){a.map((a,e)=>{$(`\n        <li class="tag tag-${a}">\n         ${a}\n        </li>\n      `).appendTo(`#${t} .tag-container`)})}}fetch("../latestProduct.json").then(t=>t.json()).then(t=>{latestProduct=t,console.log(t),init()}),fetch("../bestSeller.json").then(t=>t.json()).then(t=>{bestSeller=t,console.log(t),init()}),fetch("../featureTab.json").then(t=>t.json()).then(t=>{featuredTab=t,console.log(t),init()}),fetch("../newestTab.json").then(t=>t.json()).then(t=>{newestTab=t,console.log(t),init()}),fetch("../productTab.json").then(t=>t.json()).then(t=>{productTab=t,console.log(t),init()}),fetch("../searchProduct.json").then(t=>t.json()).then(t=>{searchProduct=t,console.log(t),init()}),$(".myModal").on(events,(function(){$(".myModal").css("display","block")}));